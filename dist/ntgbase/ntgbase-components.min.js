$(document).ready(function(){0<document.querySelectorAll(".accordion-toggler").length&&($(".open").click(function(a){a.preventDefault(),$(this).closest(".accordion-toggler").find(".close").attr("aria-expanded","false"),$(this).attr("aria-expanded","true"),$(".accordion-button").attr("aria-expanded","true"),$(".accordion-button").removeClass("collapsed"),$(".accordion-collapse").addClass("show")}),$(".close").click(function(a){a.preventDefault(),$(this).closest(".accordion-toggler").find(".open").attr("aria-expanded","false"),$(this).attr("aria-expanded","true"),$(".accordion-button").attr("aria-expanded","false"),$(".accordion-button").addClass("collapsed"),$(".accordion-collapse").removeClass("show")}))});
$("#qReset").click(function(){$("html, body").animate({scrollTop:$("#questions").offset().top-24},500)});
var isGoUpOn=!1,scrollSpeed=500,scrollHighSensor=500;function buttonUpService(o){isGoUpOn?$(o).scrollTop()<=scrollHighSensor&&($(".back-to-top").stop(!0,!0).fadeOut(500),isGoUpOn=!1):$(o).scrollTop()>scrollHighSensor&&(isGoUpOn=!0,$(".back-to-top").stop(!0,!0).fadeIn(500))}$(window).scroll(function(){buttonUpService(this)});
let currentPage=1,totalPages=0,paginationContainer=document.getElementById("pageNumbers");function renderItems(e,t,a,n){t=t.filter(e=>!e.classList.contains("d-none"));let r=(currentPage-1)*ITEMS_PER_PAGE,l=Math.min(r+ITEMS_PER_PAGE,t.length);t.forEach((e,t)=>{e.style.display=t>=r&&t<l?"":"none"}),totalPages=Math.ceil(t.length/ITEMS_PER_PAGE),renderPagination(t.length,n),a&&a.classList.toggle("d-none",0<t.length)}function renderPagination(e,a){paginationContainer.innerHTML="",totalPages=Math.ceil(e/ITEMS_PER_PAGE);let n=Math.max(1,currentPage-1),r=Math.min(totalPages,currentPage+1);3<=totalPages&&(1===currentPage?(n=1,r=3):currentPage===totalPages&&(n=totalPages-2,r=totalPages));var e=document.querySelector('.nav-btn[data-nav="first"]'),t=document.querySelector('.nav-btn[data-nav="prev"]'),e=(e.classList.toggle("disabled",1===currentPage),t.classList.toggle("disabled",1===currentPage),document.querySelector('.nav-btn[data-nav="next"]')),t=document.querySelector('.nav-btn[data-nav="last"]');e.classList.toggle("disabled",currentPage===totalPages),t.classList.toggle("disabled",currentPage===totalPages);for(let t=n;t<=r;t++){var l=document.createElement("li");l.className="page-item d-inline-block",l.innerHTML=`<a class="nav-btn page-link${t===currentPage?" page-link--current":""}" data-nav="page" data-page="${t}" href="#">${t}</a>`,l.addEventListener("click",e=>{e.preventDefault(),currentPage=t,a()}),paginationContainer.appendChild(l)}}function handleNavClick(e,t){switch(e.preventDefault(),e.target.getAttribute("data-nav")){case"first":currentPage=1;break;case"prev":1<currentPage&&currentPage--;break;case"next":currentPage<totalPages&&currentPage++;break;case"last":currentPage=totalPages}t()}function initPagination(e,t,a){renderItems(e,Array.from(e.children),t,a)}function setupNavButtons(t){document.querySelectorAll(".nav-btn").forEach(e=>{e.addEventListener("click",e=>handleNavClick(e,t))})}
function showThenHideSpinner(n=200,o=0){$(".ntg-spinner").show(),$("#paginationSection").hide(),$("#noResults").hide(),setTimeout(function(){$(".ntg-spinner").hide(),console.log("dataLength: "+o),console.log("ITEMS_PER_PAGE: "+ITEMS_PER_PAGE),console.log("totalPages: "+totalPages),1<totalPages?$("#paginationSection").show():$("#paginationSection").hide(),0===o&&$("#noResults").show()},n)}
let totalItems=document.querySelectorAll("#pageContentItem").length,filters={},uniqueFilter={label:"Unique Pill",option:"",value:"",key:"uniquePill"};async function fetchData(){try{var e=await fetch(payloadUrl);if(!e.ok)throw new Error("Network response was not ok");populatePageContent(await e.json()),console.log("Data fetched successfully.")}catch(e){throw console.error("Error fetching data:",e),e}}function populatePageContent(e){var t=document.getElementById("pageContent"),l=sessionStorage.getItem("viewMode")||"grid";t.innerHTML="",toggleViewMode(l,t,e),filterContent(),console.log("populatePageContent - Total items: "+e.length)}function toggleViewMode(e,t,l){let n="grid"===e;document.getElementById("list-view").classList.toggle("ntg-active",!n),document.getElementById("grid-view").classList.toggle("ntg-active",n),l.forEach(e=>createPageContentItem(t,e,n)),console.log("View mode toggled to "+e)}function setViewMode(e){sessionStorage.setItem("viewMode",e),showThenHideSpinner(),fetchData(),console.log("View mode switched to "+e)}let listViewButton=document.getElementById("list-view"),gridViewButton=document.getElementById("grid-view");function toggleNoResultsMessage(e){var t=document.getElementById("noResults"),l=document.getElementById("listViewHeadings");t.style.display=e?"none":"block",$("#pageContent").toggle(e),l.style.display=e&&"list"==sessionStorage.getItem("viewMode")?"block":"none",console.log("No results message toggled, results found: "+e)}function extractOptions(e){let t=new Set;e.forEach(e=>{e.querySelectorAll("span.d-lg-none, span.d-md-none").forEach(e=>e.remove());e=e.textContent.trim().replace(/\n/g,"");t.add(e)});e=Array.from(t).sort().filter(e=>""!==e.trim());return console.log("Extracted menu options:",e),e}function setupDropdown(e,t,l){let n=document.getElementById(l);t=extractOptions(document.querySelectorAll(t));populateDropdown(n,t),n.addEventListener("change",function(){showThenHideSpinner(),createFilterPill(l,this.options[this.selectedIndex].text,this.value,e),n.selectedIndex=0}),filters[e]||(filters[e]=[])}function populateDropdown(l,e){var t=l.querySelector('option[value="all"]');l.innerHTML="",l.appendChild(t),e.forEach(e=>{var t=document.createElement("option");t.value=e.toLowerCase().replace(/\s+/g," "),t.textContent=e.trim(),l.appendChild(t)})}function evaluateFilters(l){var e=l.querySelector("[data-text]"),t=document.getElementById("textInput").value.toLowerCase().trim(),e=!t||e.textContent.trim().toLowerCase().includes(t),t=Object.keys(filters).every(e=>{let t=l.querySelector(`[data-${e.split("-")[0]}]`);return 0===filters[e].length||t&&filters[e].some(e=>t.textContent.trim().toLowerCase().includes(e.value.toLowerCase()))});return e&&t}function filterContent(){var e=document.querySelectorAll("#pageContentItem");let n=!1;e.forEach(e=>{var t=evaluateFilters(e),l=e.querySelector("#pageContentItemData");e.style.display=t?"":"none",e.classList.toggle("d-none",!t),l.classList.toggle("d-block",t),l.classList.toggle("d-none",!t),t&&(n=!0)}),currentPage=1,toggleNoResultsMessage(n),toggleFilterContainerVisibility(),renderCardItems(),console.log("Content filtered.")}function createFilterPill(e,t,l,n){var i,e={label:e,option:t,value:l,key:n,active:!0};"all"===l||filters[n].some(e=>e.value===l)||(filters[n].push(e),console.log("Filter added:",e),console.log("Current filters:",filters),filterContent(),e=document.getElementById("filterPills"),(i=document.createElement("div")).classList.add("ntg-pill"),i.innerHTML=`
            <div class="btn btn-outline-dark rounded-pill me-2 mb-1 p-0">
                <input class="ntg-pill__checkbox" type="checkbox" name="pill${l}" id="pill${l}" checked>
                <label class="ntg-pill--filter__label py-2 px-3" for="pill${l}">${t}</label>
            </div>
        `,i.addEventListener("click",function(){var e=filters[n].findIndex(e=>e.value===l);filters[n].splice(e,1),this.remove(),showThenHideSpinner(),filterContent(),console.log("Filter removed, here is the updated filters "+filters[n])}),e.appendChild(i),toggleFilterContainerVisibility())}function toggleFilterContainerVisibility(){var e=document.getElementById("active-filters"),t=Object.values(filters).some(e=>0<e.length),l=uniqueFilter&&""!==uniqueFilter.value;e.classList.toggle("hidden",!(t||l))}function updateUniquePill(e,t){uniqueFilter={label:"Unique Pill",option:e,value:t.toLowerCase(),key:"uniquePill"},console.log("Unique pill updated:",uniqueFilter),filterContent(),toggleFilterContainerVisibility()}function updateUniquePillUI(e,t){$("#uniquePill").remove(),appendPillToUI(e,t,"uniquePill")}function removeUniquePill(){uniqueFilter=null,$("#uniquePill").remove(),clearFilterPills(),console.log("Unique pill removed"),filterContent()}function appendPillToUI(e,t,l){var n=document.getElementById("filterPills"),i=document.createElement("div");i.id=l,i.classList.add("ntg-pill"),i.innerHTML=`
        <div class="btn btn-outline-dark rounded-pill me-2 mb-1 p-0">
            <input class="ntg-pill__checkbox" type="checkbox" name="pill${t}" id="pill${t}" checked>
            <label class="ntg-pill--filter__label py-1 px-2" for="pill${t}">${e}</label>
        </div>
    `,i.addEventListener("click",function(){showThenHideSpinner(),$("#uniquePill").remove(),uniqueFilter=null,$("#textInput").val(""),filterContent(),console.log("Unique Pill removed, here is the updated Name input Filter Array",uniqueFilter)}),n.appendChild(i)}function resetInputFields(){$("#textInput").val(""),$("#clearInput").hide(),Object.values(filters).forEach(e=>e.length=0)}function clearFilterPills(){document.getElementById("filterPills").innerHTML="",filterNameArray=[]}function clearAllFilters(e){e.preventDefault(),showThenHideSpinner(),resetInputFields(),clearFilterPills(),document.getElementById("active-filters").classList.add("hidden"),uniqueFilter=null,filterContent()}listViewButton&&listViewButton.addEventListener("click",()=>setViewMode("list")),gridViewButton&&gridViewButton.addEventListener("click",()=>setViewMode("grid")),$("#textInput").on("input",function(){var e=$(this).val(),t=e.replace(/\s/g,"");$("#clearInput").toggle(Boolean($(this).val())),3<=e.length?(showThenHideSpinner(),updateUniquePill(e,t),updateUniquePillUI(e,t)):($("#uniquePill").remove(),uniqueFilter=null),filterContent()}),document.getElementById("clearInput")&&document.getElementById("clearInput").addEventListener("click",function(){removeUniquePill(),resetInputFields(),filterContent()});
$(document).ready(function(){setTimeout(function(){$(".lightbox .lb-data a.lb-close, .lightbox .lb-container a.lb-cancel").removeClass("external")},200),$(".ntg-image-gallery .img-thumbnail").each(function(){var a=$(this),t=new Image;t.src=a.attr("src"),t.onload=function(){t.height>t.width&&a.addClass("portrait-image")}})});
function initInPageNav(){var n;$('[data-component="ntg-inpage-nav"]').length&&(n=$("ul.ntg-inpage-nav"),$("h2").length&&$(n).append('<li class="nav-item heading">On this page</li>'),$("h2:not(.accordion-header)").each(function(){var a=$(this).text().replace(/\W/gi,"-").toLowerCase();$(this).attr("id",a),$(this).addClass("scroll-point"),$(n).append('<li class="nav-item" data-anchor-name='+a+'><a class="nav-link ps-0 pb-0" href="#'+a+'">'+$(this).text()+"</a></li>")}))}$(document).ready(function(){initInPageNav()});
function quickExit(){window.open("https://nt.gov.au","_newtab"),window.location.replace("https://www.google.com")}$(function(){$("#quickexit").on("click",function(i){quickExit()}),$("#quickexit a").on("click",function(i){i.stopPropagation()}),$(document).keyup(function(i){27==i.keyCode&&quickExit()})});
function applyStepPattern(){$(".ntg-step-list").find("h3").each(function(t){$(this).nextUntil("h3").addBack().wrapAll($("<div></div>").addClass("step-item"))}),$(".ntg-step-list li").each(function(t){var i=$(this).html().toString();$(this).html(i.trim())})}$(document).ready(function(){applyStepPattern()});
function initStickyNav(){var i;$('[data-component="ntg-sticky-nav"]').length&&($("ul.ntg-sticky-nav li a").each(function(){var t=$(this).attr("href");t&&!t.startsWith("content_container")&&$(t).addClass("scroll-point")}),i=$("ul.ntg-sticky-nav"),$("#content").addClass("no-target-outline"),$(window).scroll(function(){$("header").isInViewport()?$("#content").removeClass("ntg-sticky-nav-active"):$("#content").addClass("ntg-sticky-nav-active");var e=$(this).scrollTop()+132;$(".scroll-point").each(function(t){var i=$(this).closest("div").offset().top,n=i+$(this).closest("div").height(),a=$(this).attr("id");$(".ntg-sticky-nav__item[data-nav-item-name="+a+"]").removeClass("active"),i<=e&&e<=n&&$(".ntg-sticky-nav__item[data-nav-item-name="+a+"]").addClass("active")})}).scroll(),$(i).find('a[href^="#"]').click(function(t){t.preventDefault(),$(i).find("li.active").removeClass("active"),$(this).closest("li").addClass("active"),$("html, body").animate({scrollTop:$('[id="'+jQuery.attr(this,"href").substr(1)+'"]').offset().top-110},50,function(){})}))}$(document).ready(function(){initStickyNav();for(var t=$(".ntg-sticky-nav__item"),i=0;i<t.length;i++)0==$("#"+t[i].dataset.navItemName).length&&$(t[i]).hide()}),$.fn.isInViewport=function(){var t=$(".intro-section").outerHeight(),t=$(this).offset().top+t,i=t+$(this).outerHeight(),n=$(window).scrollTop(),a=n+$(window).height();return n<i&&t<a};
$(document).ready(function(){setTimeout(function(){$(".ntg-body table").each(function(){$(this).hasClass("table")||$(this).addClass("table").wrap('<div class="table-responsive">')}),$(".dataTables_paginate .paginate_button").removeClass("external")},5),setTimeout(function(){$(".ntg-body table").each(function(){$(this).hasClass("dataTable")&&$(this).closest(".table-responsive").css("overflow","initial")})},50)});